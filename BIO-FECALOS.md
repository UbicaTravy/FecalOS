# Fecal OS

For version 0.0002

Officially available only in Russian. For translations to other languages, check community resources or make your own.

**Внимание/Увага/Ahtung/Warning**
- НЕНОРМАТИВНАЯ ЛЕКСИКА
- РАЗГОВОРНЫЙ СТИЛЬ
- ЧИСТЫЙ РУССКИЙ ЯЗЫК ВО ВСЕЙ СВОЕЙ КРАСЕ
- ШИЗА АВТОРА

**Автор писал данную книгу:**
- Под шизой
- Под  Гражданскую Оборону (альбомы "Песни радости и счастья", "Армагеддон-попс", "Лунный переворот"), Коммунизм (альбомы "Сатанизм", "Народоведение"), Merzbow (альбомы "1930", "Metalvedrome"), и Кино - Спокойная ночь
- Смотря и восхищаясь аниме про неко и кицуне
- Сидя за 3 компами и делая это то с Ubuntu, то с ноута.
- Под сильным влиянием Терри Девиса, Чарльз Петсольд - Код
- Просто в свои дни когда он ебанутый 

---

Fecal OS - это это панк, хаос, нойз, говно в лоу-левел. Её суть проста - показать какое говно может сотворить чувак из Сибири. А если честно - то в образовательных целях для автора.

То есть это как эксперемент. Но с нотками панка, навоза, нойза и кучи дерьма (простите за тавтологию).

Поэтому он и называется Fecal OS. Но ещё потому что у Курт Кобейна есть первый альбом - Fecal Matters. Вот я и спизд... ну то есть провёл аналогию.

Данная ОС не расчитана на загрузку на реальное загрузочное устройство и работу на компьютере - здесь технологии 2010 годов. Всё пишется вручную и по книгам которые есть в интернете в открытом доступе.

[Little book about developing OS](https://littleosbook.github.io/)
Чарльз Петсольд - Код
[Создание ОС на языке программирования Rust](https://os.phil-opp.com/ru/)

Почему я так решил, что ОС не может запуститься на ПК и быть как нормальная ОС хотя бы на 32-битном бабушкином компе. Ну во-первых, я на это не расчитываю. Да, было бы прикольно - но это сложно и надо лишний комп для дебуга и нужно для этого специально стремиться. Если у вас есть лишние деньги, время, комп - пишите мне в тг, - я у вас всё это возьму с радостью (шутка). Во-вторых - я не думаю что эту ОС будут юзать на реальном компе, это нахуй никому не нужно. А в-третьих, в книгах которые я читал не рассказивается как делать для компов как нормальную ОС.

Вот такие пироги.

# История создания и биография проекта

## Начало

Сама идея пришла мне почти сразу как я вступил на Rust/C++/Assembler. Я сразу смекнул - они низкоуровневые и на них пишут ОС.

Сначало я мечтал создать ядро типа Linux и уже на нём написать свою ОС. Так я сделаю ядро, которое возможно будет полезным на территории РФ и ОС, которая будет заменой западным аналогам (см. далее почему я так говорю).

Нет, я не говорю что Linu, его дистрибутивы или MacOS - говно, поэтому я делаю ОС. Нет, мне просто интересно быть в этой теме, ну и если я сделаю что-то годное я принесу пользу народу России. Смотря на запреты РКН и государства, вскоре могут заблокировать Linux, Windows (хотя от блокировки Windows минусов не последует), и MacOS. Нет, я не пользуюсь случаем, просто так совпало. Я хочу сделать полезное просто. И всё.

Хотя, флешки и DVD с тем же Windows никуда не удаляться (жаль), они остануться, но будут просто запреты. Хотя с другой стороны - у нас нету аналога этим ОС, поэтому это либо не скоро либо просто не будет такого. Я очень надеюсь что мозг властей настолько маленький, что они никогда не узнают что такое ОС и не углубляться в эту тему.

Так вот, я хотел делать ядро на Rust и какие-то критичные части на C++. Но потом я тщательней изучил эту тему, и понял что это тупо.

После раздумий и как я нашёл Маленькую книгу про написание ОС, я сразу понял: "Вот она - благодать!". И я попёр делать НН (No Name - без имени) ОС. Потом решил назвать ОС - Fecal OS. Я просто провёл аналогию с перввыымм альбомом Курта Кобейна, который называется "Fecal Matters".

# Начало создания

Ну вот, затем я сильно промотивировался и начал делать и страницу на своём сайте про Fecal OS. И там много ещё хуйни.

Сначало, за неимением  Linux даже на VM, потому что они ломались, я делал на Windows. Я мог писать только на 16 битном ассемблере, т.к. у меня нельзя было линковать. А 16 битный потому что 32/64 не могли использовать BIOS прерывания (а кадровый буфер у меня не получался). И я жил на 16 битном ассемблере пока не появился Linux.

Linux я ждал долго, поэтому я был рад даже Ubuntu на Intel Core i5-4406 и 4 Гб ОЗУ с 50 Гб SSD. Мне было этого достаточно. Я скачал VS Code и прочее и попёрло. Линковать - могу прекрасно, эмуляция - ахуительная, grub (который я так и не смог вставить тогда) - качался нормально. C, кадровый буфер - всё работало прекрасно. Одно расстраивало - я не моать на 64 бит. У меня происходил какой-то баг и всё ломалось. Поэтому я пока остановился на 32 бит.

# Что сейчас?

## Загрузчик (bootloader)

Первое, с чего начинается любая ОС — это загрузчик. Он отвечает за то, чтобы "разбудить" компьютер, подготовить память и передать управление ядру.

Мой загрузчик находиться в boot.asm и с 16 битного режима переходит в 32 битный режим а потом запускает ядро.

##  Ядро

В этом проекте ядро реализовано максимально просто и понятно, чтобы было легко разобраться даже новичку. Основная задача ядра — инициализировать базовые драйверы (например, VGA для вывода текста и драйвер клавиатуры для ввода), выполнить проверки и запустить основную функцию пользовательской логики (`fecalos_main`). 

Вся логика ядра находится в файле `kernel.c`. Здесь происходит:

- Инициализация VGA-драйвера для работы с текстовым режимом экрана (16 цветов, индивидуальный фон для каждой строки).
- Инициализация драйвера клавиатуры (PS/2), чтобы можно было обрабатывать ввод пользователя.
- Проверка базовых условий запуска (например, что система действительно работает в 32-битном защищённом режиме).
- Запуск основной функции ОС — `fecalos_main`, которая уже отвечает за вывод приветственных сообщений, демонстрацию возможностей и запуск командной строки.

Ядро не содержит сложных планировщиков, многозадачности или поддержки файловых систем — всё максимально минималистично и прозрачно. Его задача — подготовить "почву" для пользовательской части и командной строки, а также обеспечить базовое взаимодействие с железом через простые драйверы. Но позже будет круто.

Архитектура модульная: ядро и пользовательская логика разделены, чтобы можно было легко расширять функционал или экспериментировать с разными подходами. Все исходники снабжены комментариями для лучшего понимания происходящего.

## Драйвера

### VGA Driver

В FecalOS реализован собственный драйвер VGA для работы в текстовом режиме. Он находится в папке `drivers/` в файле `vga.c` и позволяет управлять выводом текста на экран с использованием 16 стандартных цветов, а также задавать индивидуальный цвет фона для каждой строки.

#### Основные возможности VGA-драйвера:

- **Установка глобального цвета фона**: можно задать цвет, который будет использоваться по умолчанию для всего экрана.
- **Очистка экрана**: функция, которая полностью очищает экран и заполняет его выбранным цветом фона.
- **Печать текста в любую позицию**: можно вывести строку текста в любую строку и столбец экрана, указав цвет текста и цвет фона.
- **Центрирование текста**: реализована функция для вывода текста по центру строки, что удобно для приветственных сообщений и заголовков.
- **Индивидуальный фон для строк**: каждая строка может иметь свой цвет фона, что позволяет делать интерфейс более наглядным и красивым.

#### Пример использования:

В функции `fecalos_main` (см. `fecalos.c`) используются такие функции драйвера, как:
- `vga_set_background_color_and_clear(VGA_BLUE);` — устанавливает синий фон и очищает экран.
- `vga_print_centered_with_bg(2, "FecalOS v0.0002 - Simple Boot Test", VGA_LIGHT_GREEN, VGA_USE_GLOBAL_BG);` — выводит строку по центру с заданным цветом текста и фона.

#### Технические детали:

Драйвер работает напрямую с видеопамятью VGA (обычно по адресу `0xB8000`), формируя каждый символ как байт символа + байт атрибутов (цвет текста и фона). Все функции написаны максимально просто и снабжены комментариями, чтобы было понятно даже тем, кто только начинает разбираться с низкоуровневым программированием.

В будущем планируется добавить поддержку пользовательских шрифтов и, возможно, графического режима, но пока акцент на простоте и наглядности работы с текстовым режимом VGA.

Я решил выбрать пока что VGA, потому что VESA или более лучшие режимы - сложные для меня и пока что не нужны. Мне сейчас нужно разобраться до версии v0.001 с консолью, цветами VGA, файловой системой (хотя бы простейшей), созданием текстовых файлов, курсор мышки.

### Драйвер клавиатуры (PS/2)

В FecalOS реализован базовый драйвер клавиатуры для работы с обычной PS/2-клавиатурой в текстовом режиме. Драйвер находится в папке `drivers/` в файле `keyboard.c` и позволяет обрабатывать нажатия клавиш, чтобы пользователь мог взаимодействовать с командной строкой и вводить команды.

#### Основные возможности драйвера клавиатуры:

- **Чтение сканкодов**: драйвер напрямую читает сканкоды с порта клавиатуры (обычно порт `0x60`), преобразует их в ASCII-символы.
- **Обработка нажатий и отпусканий**: реализовано различие между нажатием и отпусканием клавиши, чтобы корректно реагировать на ввод.
- **Поддержка основных клавиш**: обрабатываются буквы, цифры, пробел, Enter, Backspace и некоторые специальные клавиши.
- **Буферизация ввода**: введённые символы сохраняются во внутренний буфер, чтобы их можно было использовать в командной строке.
- **Интеграция с командной строкой**: драйвер передаёт введённые символы в оболочку (shell), где они отображаются на экране и используются для формирования команд.

Пока это нигде не используется, но подготовленно на будущее.

## ОС

Вся пользовательская логика ОС FecalOS реализована в файле `fecalos.c`. Именно здесь находится функция `fecalos_main`, которая вызывается после инициализации ядра и драйверов. В этой функции происходит вывод приветственных сообщений, демонстрация возможностей системы и подготовка к запуску командной строки.

### Основные моменты реализации в `fecalos.c`:

- **Инициализация экрана:**  
  С помощью функции `vga_set_background_color_and_clear(VGA_BLUE);` устанавливается синий цвет фона и очищается экран.

- **Вывод приветственных сообщений:**  
  Используются функции VGA-драйвера для вывода текста по центру экрана с разными цветами текста и фона. Например:
  - Версия ОС и статус загрузки
  - Информация о режиме работы (32-битный защищённый режим)
  - Авторские и географические сведения
  - Инструкция для пользователя о запуске программ

- **Демонстрация возможностей:**  
  Каждое сообщение выводится с индивидуальным цветом фона, чтобы показать возможности работы с цветами VGA.

- **Ожидание пользователя:**  
  После вывода сообщений программа входит в бесконечный цикл, чтобы ОС не завершалась сразу после старта.

- **Подготовка к командной строке:**  
  В дальнейшем здесь будет запускаться командная строка (Fash — FecalOS Shell), которая позволит взаимодействовать с системой.

Весь код снабжён подробными комментариями, чтобы было понятно, что и зачем происходит. Такой подход делает файл `fecalos.c` отличной отправной точкой для понимания пользовательской части FecalOS и её расширения в будущем.

#  Что я извлёк пока что из этого проекта

Мне, честно, показалось - ничего. Но если приглядеться, то я понял, что такое прерывания, изучил работу ассемблера, написание бинарных файлов на C, линковка, написание своих драйверов для своей ОС, понимания работы компьютера на очень низком уровне, почти до уровня электронов, я понял что x86 и ARM это одно и тоже, у них одна и та же реализация, я понял многое. В 14 МАТЬ ЕГО ЛЕТ! ДА БЛЯТЬ! В 14 СУКА ЛЕТ!

В 14 лет вы наверное палкой крапиву пиздили и бухали на вписках - а я, живущий в Сибире в самой пизде Алтая, сижу пишу ОС в тихоря.

"И после этого ты ещё считаеь что то что ты сделал - говно?". Я это сделал, как панк проект, это обязательно говно, но не для меня. Для меня это как алмаз который я точил зубочисткой, ещё и сидя в пелёнке. Я получил из этого большой опыт.

Я не хочу понтоваться, вы поймите это. Я просто говорю как есть и пытаюсь ещё вылить мой ещё шок от того что я делаю такие вещи в таком возрасте. Хотя раньше я не придавал этому большого значения.

То есть я, 14 летний сибиряк слушающий сибирский панк, японский нойз, смотрящий аниме, который ещё и любит котиков сделал ОС. Простую, но ОС это назвать можно. ОС можно назвать даже просто загрузчик и ядро, которое кладёт в EAX значение из адреса памяти 0xB8000.

Я - Терри Девис и Линус Торвальдс из Сибири, грубо говоря.

На этом биография и краткая документация Fecal OS закончена. Спасибо что прочитали и не блеванули!

# Философия FecalOS

FecalOS - это не просто операционная система, это философия. Философия панка, нойза и аниме.

Это манифест нового поколения разработчиков - технически грамотных, творческих, независимых, и от часть ебанутых и бесконтрольных.

# Roadmap до v0.001

## Короткие цели:
- Простая оболочка (Fash)
- Базовые команды (help, clear, version)
- Обработка прерываний клавиатуры

## Средние цели:
- Файловая система (простейшая)
- Создание текстовых файлов
- Курсор мыши
- Поддержка цветов VGA

## Долгосрочные цели:
- СУКА .iso БЛЯТЬ!

# Для таких же как я

Этот проект создан для:
- Молодых программистов из России/СНГ
- Тех, кто хочет понять низкоуровневое программирование
- Людей, которым интересна тема ОС, но сложно начать

Если ты такой же как я - 14-летний программист из глубинки, который хочет создавать что-то крутое - этот проект для тебя.

**"Если я смог в 14 лет из Сибири, то и ты сможешь!"**

# FAQ для разработчиков

Подробные ответы есть в комментариях в коде.

## Q: Почему именно VGA, а не VESA?
**A:** VGA проще для понимания и отладки. VESA добавлю позже.

## Q: Зачем писать ОС в 2025 году?
**A:** Для образования, понимания архитектуры, и просто потому что это круто.

## Q: Почему так много комментариев в коде?
**A:** Чтобы было понятно новичкам. Я сам учился по таким примерам.

## Q: Планируешь ли ты серьезную ОС?
**A:** Нет, это образовательный проект. Но кто знает, что будет в будущем?

## "Как тебе такое, Терри Девис?"

Я хуярю сам, в глухой сибири, один.

# 🔧 Fash Commands — `// СПОЙЛЕР //` 

**Базовые:**  
- `help` — Показать это меню 
- `clear` — Очистить экран
- `reboot` — Перезагрузка
- `exit` - Завершение работы

**Секретки:**  
- `nirvana` - Выведет текст песни "Smells Like Teen Spirit"
- `letov` - Выведет текст песни "Русское Поле Эксперементов"
- `hui` - Уже знаете что выведет

(это не все секретки, найдёте их в коде сами)

### Created by KillerGrass

<div align="center">
<img src="img/killergrass_logo.jpg" width="400" alt="KillerGrass_logo"/>

[![GitHub](https://img.shields.io/badge/-GitHub-181717?style=for-the-badge&logo=github&logoColor=white)](https://github.com/UbicaTravy)
[![Telegram](https://img.shields.io/badge/-Telegram-2CA5E0?style=for-the-badge&logo=telegram&logoColor=white)](https://t.me/killergrass_programms)
[![LIVE Channel](https://img.shields.io/badge/-LIVE%20Kanal-2CA5E0?style=for-the-badge&logo=telegram&logoColor=white)](https://t.me/kanal_kashkamalhika)
</div>

<div align="center">

## Contacts

[![Telegram](https://img.shields.io/badge/Telegram-2CA5E0?style=flat&logo=telegram&logoColor=white)](https://t.me/KillerGrassContactBot)
[![Gmail](https://img.shields.io/badge/Gmail-D14836?style=flat&logo=gmail&logoColor=white)](mailto:killergrasscontact@gmail.com)
</div>